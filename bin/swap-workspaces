#!/usr/bin/env bash
# Swap all windows between two workspaces

WS_A=${1:-1}
WS_B=${2:-2}
TEMP=99

# Get window addresses from each workspace
WS_A_WINS=$(hyprctl clients -j | jq -r ".[] | select(.workspace.id == $WS_A) | .address")
WS_B_WINS=$(hyprctl clients -j | jq -r ".[] | select(.workspace.id == $WS_B) | .address")

# Build batch command
BATCH=""
for ADDR in $WS_A_WINS; do
  BATCH="${BATCH}dispatch movetoworkspacesilent $TEMP,address:$ADDR;"
done
for ADDR in $WS_B_WINS; do
  BATCH="${BATCH}dispatch movetoworkspacesilent $WS_A,address:$ADDR;"
done
for ADDR in $WS_A_WINS; do
  BATCH="${BATCH}dispatch movetoworkspacesilent $WS_B,address:$ADDR;"
done

# Switch to where the original windows moved
hyprctl --batch "${BATCH}dispatch workspace $WS_B"
