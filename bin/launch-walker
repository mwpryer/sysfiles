#!/usr/bin/env bash
# Launch walker application launcher with dependencies

# Ensure elephant is running before launching walker
if ! pgrep -x elephant >/dev/null; then
  systemctl --user start elephant.service
fi

# Ensure walker service is running
if ! pgrep -f "walker --gapplication-service" >/dev/null; then
  setsid walker --gapplication-service &
  # Allow service to start
  sleep 0.1
fi

exec walker "$@"
